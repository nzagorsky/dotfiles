debug:
  shortCut: Shift-D
  description: Add debug container
  dangerous: true
  scopes:
    - containers
  command: bash
  background: false
  confirm: true
  args:
    - -c
    - "kubectl --kubeconfig=$KUBECONFIG debug -it --context $CONTEXT -n=$NAMESPACE $POD --target=$NAME --image=nicolaka/netshoot:v0.13 --share-processes -- bash"

debug-crashing:
  shortCut: Ctrl-D
  description: Create debug pod for a crashing container
  dangerous: true
  scopes:
    - containers
  command: bash
  background: false
  confirm: true
  args:
    - -c
    - "kubectl --kubeconfig=$KUBECONFIG debug -n $NAMESPACE pod/$POD --copy-to=${POD}-debug --container=$NAME -- sleep 365d"

edit-secret:
  shortCut: Ctrl-X
  confirm: false
  description: "Edit Decoded Secret"
  scopes:
    - secrets
  command: kubectl
  background: false
  args:
    - modify-secret
    - --namespace
    - $NAMESPACE
    - --context
    - $CONTEXT
    - $NAME

refresh-external-secrets:
  shortCut: Shift-R
  confirm: false
  scopes:
    - externalsecrets
  description: Refresh the externalsecret
  command: bash
  background: false
  args:
    - -c
    - "kubectl annotate externalsecrets.external-secrets.io -n $NAMESPACE $NAME force-sync=$(date +%s) --overwrite"

refresh-push-secrets:
  shortCut: Shift-R
  confirm: false
  scopes:
    - pushsecrets
  description: Refresh the pushsecret
  command: bash
  background: false
  args:
    - -c
    - "kubectl annotate pushsecrets.external-secrets.io -n $NAMESPACE $NAME force-sync=$(date +%s) --overwrite"
